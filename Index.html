<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript Console</title>
  <!-- MathJax for equation rendering -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      overflow: hidden;
      transition: background-color 0.3s, color 0.3s;
    }
    :root {
      --bg-color: #f4f4f4;
      --text-color: black;
      --border-color: #ccc;
      --bar-bg: #f1f1f1;
      --bookmark-bg: #e0e0e0;
      --bookmark-hover: #d0d0d0;
      --button-bg: #4CAF50;
      --tab-bg: #f0f0f0;
    }
    body.dark {
      --bg-color: #1e1e1e;
      --text-color: white;
      --border-color: #444;
      --bar-bg: #2a2a2a;
      --bookmark-bg: #3a3a3a;
      --bookmark-hover: #4a4a4a;
      --button-bg: #388E3C;
      --tab-bg: #333;
    }
    #bookmarksBar {
      background-color: var(--bar-bg);
      padding: 5px;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      box-sizing: border-box;
    }
    .bookmark {
      padding: 5px 10px;
      margin: 2px 5px;
      background-color: var(--bookmark-bg);
      border: 1px solid var(--border-color);
      border-radius: 3px;
      cursor: pointer;
      font-size: 14px;
      text-decoration: none;
      color: var(--text-color);
      display: flex;
      align-items: center;
    }
    .bookmark:hover {
      background-color: var(--bookmark-hover);
    }
    .bookmark .remove {
      margin-left: 5px;
      color: red;
      font-weight: bold;
      cursor: pointer;
    }
    .bookmark .remove:hover {
      color: darkred;
    }
    .container {
      display: flex;
      flex-direction: column;
      height: calc(100vh - 40px);
      margin-top: 40px;
      box-sizing: border-box;
    }
    h1 {
      margin: 10px 0;
      text-align: center;
      font-size: 24px;
      flex-shrink: 0;
      color: var(--text-color);
    }
    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 10px;
      flex-shrink: 0;
    }
    .tab {
      padding: 10px 20px;
      background-color: var(--tab-bg);
      cursor: pointer;
      margin: 0 5px;
      border: 1px solid var(--border-color);
      color: var(--text-color);
    }
    .active-tab {
      background-color: var(--button-bg);
      color: white;
    }
    .console-container {
      flex: 1;
      display: flex;
      overflow: hidden;
    }
    .console {
      flex: 1;
      border: 1px solid var(--border-color);
      background-color: var(--bg-color);
      padding: 10px;
      font-family: monospace;
      white-space: pre-wrap;
      overflow-y: auto;
      box-sizing: border-box;
      color: var(--text-color);
    }
    .console .log { color: var(--text-color); }
    .console .error { color: red; }
    .console .warn { color: #ffcc00; }
    .console .info { color: blue; }
    .input-container {
      display: flex;
      flex-shrink: 0;
      padding: 10px;
      box-sizing: border-box;
      position: relative;
    }
    #inputField {
      flex: 1;
      padding: 10px;
      font-size: 16px;
      margin-right: 10px;
      box-sizing: border-box;
      font-family: monospace;
      background-color: var(--bg-color);
      color: var(--text-color);
      border: 1px solid var(--border-color);
      resize: vertical;
      min-height: 40px;
    }
    button {
      padding: 10px;
      background-color: var(--button-bg);
      color: white;
      border: none;
      cursor: pointer;
      font-size: 16px;
      margin: 0 5px;
      flex-shrink: 0;
    }
    .element-link {
      color: blue;
      cursor: pointer;
      text-decoration: underline;
      margin-left: 5px;
    }
    .element-link:hover {
      color: darkblue;
    }
    #autocomplete {
      position: absolute;
      bottom: 60px;
      left: 10px;
      background-color: var(--bg-color);
      border: 1px solid var(--border-color);
      max-height: 150px;
      overflow-y: auto;
      display: none;
      z-index: 100;
    }
    .autocomplete-item {
      padding: 5px;
      cursor: pointer;
      color: var(--text-color);
    }
    .autocomplete-item:hover {
      background-color: var(--bookmark-hover);
    }
    #gameCanvas {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border: 1px solid var(--border-color);
      display: none;
      z-index: 2000;
    }
  </style>
</head>
<body>
  <div id="bookmarksBar"></div>
  <div class="container">
    <h1 id="consoleTitle">JavaScript Console</h1>
    <div class="tabs">
      <div id="jsTab" class="tab active-tab">JavaScript</div>
    </div>
    <div class="console-container">
      <div id="jsConsole" class="console"></div>
    </div>
    <div class="input-container">
      <textarea id="inputField" placeholder="Enter code here..."></textarea>
      <button id="executeBtn">Execute Code</button>
      <button id="clearBtn">Clear Console</button>
      <button id="exportBtn">Export Log</button>
      <button id="themeBtn">Toggle Theme</button>
      <div id="autocomplete"></div>
    </div>
  </div>
  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <script>
    console.log('Script loaded');

    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM fully loaded');

      // Global variables
      let currentTab = 'js';
      let elementList = [];
      let commandHistory = [];
      let historyIndex = -1;
      let isGameRunning = false;

      // Core functions
      function switchTab(tab) {
        currentTab = tab;
        if (tab === 'js') {
          document.title = "JavaScript Console";
          document.getElementById('consoleTitle').textContent = 'JavaScript Console';
          document.getElementById('jsTab').classList.add('active-tab');
        }
      }

      function appendLog(message, type = 'log', isHtml = false) {
        const consoleDiv = document.getElementById(`${currentTab}Console`);
        if (!consoleDiv) {
          console.error('Console div not found');
          return;
        }
        const line = document.createElement('div');
        line.className = type;
        if (isHtml) {
          line.innerHTML = message;
        } else {
          line.textContent = message;
        }
        consoleDiv.appendChild(line);
        consoleDiv.scrollTop = consoleDiv.scrollHeight;
        if (typeof MathJax !== 'undefined') MathJax.typeset();
      }

      function clearConsole() {
        const consoleDiv = document.getElementById(`${currentTab}Console`);
        if (consoleDiv) consoleDiv.innerHTML = '';
      }

      console.log = function(message) { appendLog(message, 'log'); };
      console.error = function(message) { appendLog(message, 'error'); };
      console.warn = function(message) { appendLog(message, 'warn'); };
      console.info = function(message) { appendLog(message, 'info'); };

      function executeCode() {
        const input = document.getElementById('inputField').value.trim();
        if (input === '') {
          appendLog('Error: Please enter some code to execute.', 'error');
          playSound('error');
          return;
        }

        commandHistory.unshift(input);
        historyIndex = -1;
        try {
          if (input === 'idiot();') {
            idiot();
          } else if (input === 'elements();') {
            elements();
          } else if (input === 'elementshelp();') {
            elementshelp();
          } else if (input.includes('=') && input.includes('x')) {
            const [leftSide, rightSide] = input.split('=').map(part => part.trim());
            const solution = solveEquation(leftSide, rightSide);
            appendLog(`Equation: \\(${leftSide} = ${rightSide}\\), Solution: \\(x = ${solution}\\)', 'log', true);
            playSound('success');
          } else if (window.editElement && /\d+\s/.test(input)) {
            window.editElement(input);
          } else {
            const result = eval(input);
            console.log(`Result: ${result}`);
            playSound('execute');
          }
        } catch (e) {
          appendLog('Error: ' + e.message, 'error');
          playSound('error');
        }
        document.getElementById('inputField').value = '';
        hideAutocomplete();
      }

      function solveEquation(left, right) {
        function parseSide(side) {
          side = side.replace(/\s+/g, '');
          let coeffX = 0, constant = 0;
          let currentNum = '';
          let sign = 1;

          for (let i = 0; i < side.length; i++) {
            const char = side[i];
            if (char === '+' || char === '-') {
              if (currentNum) {
                if (currentNum.includes('x')) {
                  coeffX += sign * (parseFloat(currentNum.replace('x', '')) || 1);
                } else {
                  constant += sign * parseFloat(currentNum);
                }
              }
              currentNum = '';
              sign = char === '+' ? 1 : -1;
            } else {
              currentNum += char;
            }
          }
          if (currentNum) {
            if (currentNum.includes('x')) {
              coeffX += sign * (parseFloat(currentNum.replace('x', '')) || 1);
            } else {
              constant += sign * parseFloat(currentNum);
            }
          }
          return { coeffX, constant };
        }

        const leftParsed = parseSide(left);
        const rightParsed = parseSide(right);

        const finalCoeffX = leftParsed.coeffX - rightParsed.coeffX;
        const finalConstant = rightParsed.constant - leftParsed.constant;

        if (finalCoeffX === 0) {
          if (finalConstant === 0) {
            appendLog('Infinite solutions (identity)', 'info');
            return 'all real numbers';
          } else {
            appendLog('No solution (contradiction)', 'error');
            return 'no solution';
          }
        }

        return finalConstant / finalCoeffX;
      }

      // Theme Toggle
      function toggleTheme() {
        document.body.classList.toggle('dark');
        localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
      }

      // Export Log
      function exportLog() {
        const consoleDiv = document.getElementById('jsConsole');
        const text = Array.from(consoleDiv.children).map(line => line.textContent).join('\n');
        const blob = new Blob([text], { type: 'text/plain' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'console-log.txt';
        a.click();
      }

      // Sound Effects
      function playSound(type) {
        const sounds = {
          execute: new Audio('https://www.myinstants.com/media/sounds/click.mp3'),
          success: new Audio('https://www.myinstants.com/media/sounds/ding.mp3'),
          error: new Audio('https://www.myinstants.com/media/sounds/error.mp3')
        };
        sounds[type]?.play();
      }

      // Autocomplete
      const functions = ['squares', 'ponies', 'sawyer', 'aiden', 'aadyn', 'eli', 'elijah', 'ronin', 'ronin1', 'ronin2', 'check', 'idiot', 'elements', 'elementshelp', 'list', 'snake'];
      function setupAutocomplete() {
        const autocomplete = document.getElementById('autocomplete');
        const inputField = document.getElementById('inputField');
        inputField.addEventListener('input', () => {
          const value = inputField.value.toLowerCase();
          if (value === '') {
            hideAutocomplete();
            return;
          }
          const matches = functions.filter(f => f.startsWith(value));
          if (matches.length === 0) {
            hideAutocomplete();
            return;
          }
          autocomplete.innerHTML = '';
          matches.forEach(match => {
            const item = document.createElement('div');
            item.className = 'autocomplete-item';
            item.textContent = `${match}()`;
            item.addEventListener('click', () => {
              inputField.value = `${match}();`;
              hideAutocomplete();
              inputField.focus();
            });
            autocomplete.appendChild(item);
          });
          autocomplete.style.display = 'block';
        });
      }

      function hideAutocomplete() {
        document.getElementById('autocomplete').style.display = 'none';
      }

      // History and Multi-Line Input Handling
      function setupInput() {
        const inputField = document.getElementById('inputField');
        inputField.addEventListener('keydown', (event) => {
          if (event.key === 'Enter' && !event.shiftKey) {
            event.preventDefault();
            executeCode();
          } else if (event.key === 'ArrowUp') {
            event.preventDefault();
            if (historyIndex < commandHistory.length - 1) {
              historyIndex++;
              inputField.value = commandHistory[historyIndex];
            }
          } else if (event.key === 'ArrowDown') {
            event.preventDefault();
            if (historyIndex > -1) {
              historyIndex--;
              inputField.value = historyIndex === -1 ? '' : commandHistory[historyIndex];
            }
          }
        });
      }

      // Mini-Game: Snake
      function snake() {
        if (isGameRunning) return;
        isGameRunning = true;
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.style.display = 'block';

        const gridSize = 20;
        let snake = [{ x: 10, y: 10 }];
        let food = { x: 15, y: 15 };
        let dx = 0, dy = 0;
        let score = 0;

        function draw() {
          ctx.fillStyle = document.body.classList.contains('dark') ? '#1e1e1e' : '#f4f4f4';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = 'green';
          snake.forEach(segment => ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize - 2, gridSize - 2));
          ctx.fillStyle = 'red';
          ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize - 2, gridSize - 2);
        }

        function move() {
          const head = { x: snake[0].x + dx, y: snake[0].y + dy };
          if (head.x < 0 || head.x >= canvas.width / gridSize || head.y < 0 || head.y >= canvas.height / gridSize || snake.some(s => s.x === head.x && s.y === head.y)) {
            appendLog(`Game Over! Score: ${score}`, 'info');
            isGameRunning = false;
            canvas.style.display = 'none';
            return;
          }
          snake.unshift(head);
          if (head.x === food.x && head.y === food.y) {
            score++;
            food = { x: Math.floor(Math.random() * (canvas.width / gridSize)), y: Math.floor(Math.random() * (canvas.height / gridSize)) };
          } else {
            snake.pop();
          }
          draw();
          setTimeout(move, 100);
        }

        document.addEventListener('keydown', function handler(e) {
          if (!isGameRunning) {
            document.removeEventListener('keydown', handler);
            return;
          }
          switch (e.key) {
            case 'ArrowUp': if (dy !== 1) { dx = 0; dy = -1; } break;
            case 'ArrowDown': if (dy !== -1) { dx = 0; dy = 1; } break;
            case 'ArrowLeft': if (dx !== 1) { dx = -1; dy = 0; } break;
            case 'ArrowRight': if (dx !== -1) { dx = 1; dy = 0; } break;
            case 'Escape': isGameRunning = false; canvas.style.display = 'none'; break;
          }
        });

        draw();
        setTimeout(move, 100);
      }

      function squares() {
        const container = document.createElement("div");
        container.style.position = "fixed";
        container.style.top = "0";
        container.style.left = "0";
        container.style.width = "100vw";
        container.style.height = "100vh";
        container.style.overflow = "hidden";
        document.body.appendChild(container);

        class Square {
          constructor(x, y, dx, dy) {
            this.element = document.createElement("div");
            this.element.style.position = "absolute";
            this.element.style.width = "50px";
            this.element.style.height = "50px";
            this.element.style.backgroundColor = "lightgreen";
            this.element.style.borderRadius = "5px";
            this.x = x;
            this.y = y;
            this.dx = dx;
            this.dy = dy;
            this.size = 50;
            container.appendChild(this.element);
            this.updatePosition();
          }
          updatePosition() {
            this.element.style.left = `${this.x}px`;
            this.element.style.top = `${this.y}px`;
          }
          move() {
            this.x += this.dx;
            this.y += this.dy;
            if (this.x <= 0 || this.x + this.size >= window.innerWidth) this.dx = -this.dx;
            if (this.y <= 0 || this.y + this.size >= window.innerHeight) this.dy = -this.dy;
            this.updatePosition();
          }
        }

        const squares = [];
        function createNewSquare() {
          const x = (window.innerWidth - 50) / 2;
          const y = (window.innerHeight - 50) / 2;
          const dx = 5;
          const dy = 5;
          const newSquare = new Square(x, y, dx, dy);
          squares.push(newSquare);
        }
        setInterval(createNewSquare, 125);
        function animate() {
          squares.forEach(square => square.move());
          requestAnimationFrame(animate);
        }
        animate();
      }

      function ponies() {
        (function (srcs, cfg) {
          var cbcount = 1;
          var callback = function () {
            --cbcount;
            if (cbcount === 0) {
              BrowserPonies.setBaseUrl(cfg.baseurl);
              if (!BrowserPoniesBaseConfig.loaded) {
                BrowserPonies.loadConfig(BrowserPoniesBaseConfig);
                BrowserPoniesBaseConfig.loaded = true;
              }
              BrowserPonies.loadConfig(cfg);
              if (!BrowserPonies.running()) BrowserPonies.start();
            }
          };
          if (typeof(BrowserPoniesConfig) === "undefined") window.BrowserPoniesConfig = {};
          if (typeof(BrowserPoniesBaseConfig) === "undefined") {
            ++cbcount;
            BrowserPoniesConfig.onbasecfg = callback;
          }
          if (typeof(BrowserPonies) === "undefined") {
            ++cbcount;
            BrowserPoniesConfig.oninit = callback;
          }
          var node = (document.body || document.documentElement || document.getElementsByTagName('head')[0]);
          for (var id in srcs) {
            if (document.getElementById(id)) continue;
            if (node) {
              var s = document.createElement('script');
              s.type = 'text/javascript';
              s.id = id;
              s.src = srcs[id];
              node.appendChild(s);
            }
          }
          callback();
        })({
          "browser-ponies-script": "https://panzi.github.io/Browser-Ponies/browserponies.js",
          "browser-ponies-config": "https://panzi.github.io/Browser-Ponies/basecfg.js"
        }, {
          "baseurl": "https://panzi.github.io/Browser-Ponies/",
          "fadeDuration": 500,
          "volume": 1,
          "fps": 25,
          "speed": 3,
          "audioEnabled": false,
          "showFps": false,
          "showLoadProgress": true,
          "speakProbability": 0.1,
          "spawn": {
            "applejack": 1,
            "fluttershy": 1,
            "pinkie pie": 1,
            "rainbow dash": 1,
            "rarity": 1,
            "twilight sparkle": 1
          }
        });
      }

      var gifSrc = 'https://media.giphy.com/media/uDgOkInszKwt7B3Ql1/giphy.gif';
      var gifsPerRow = 13;
      var numRows = 9;
      var gifSize = 150;
      var numGrids = 5;

      function sawyer() { rec(document.body); }
      function rec(n) { doit(n); var nodes = n.childNodes; var x = nodes.length; while (x--) rec(nodes[x]); }
      function doit(n) { if (n.nodeType === 1) createGrid(); }
      function createGrid() {
        var totalGifsCreated = document.body.getElementsByTagName('img').length;
        var totalGifsToCreate = gifsPerRow * numRows * numGrids;
        if (totalGifsCreated >= totalGifsToCreate) return;
        for (var gridIndex = 0; gridIndex < numGrids; gridIndex++) {
          for (var row = 0; row < numRows; row++) {
            for (var col = 0; col < gifsPerRow; col++) {
              createGif(row, col, gridIndex, gifSize);
            }
          }
        }
      }
      function createGif(row, col, gridIndex, size) {
        var gif = document.createElement('img');
        gif.src = gifSrc;
        gif.style.position = 'absolute';
        var offsetY = gridIndex * (numRows * gifSize);
        gif.style.top = (row * gifSize + offsetY) + 'px';
        gif.style.left = col * gifSize + 'px';
        gif.style.zIndex = '9999';
        gif.style.width = size + 'px';
        gif.style.height = size + 'px';
        document.body.appendChild(gif);
      }

      var gifSrcAiden = 'https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExMzVyM2p4d3JqeTNpcDhtdGk2dGdxZ3p6bDNpbWxuczFoNGN4YzRpbCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Ahgz5lNbT3I1BY1nDi/giphy.gif';
      function aiden() { recAiden(document.body); }
      function recAiden(n) { doitAiden(n); var nodes = n.childNodes; var x = nodes.length; while (x--) recAiden(nodes[x]); }
      function doitAiden(n) { if (n.nodeType === 1) createGridAiden(); }
      function createGridAiden() {
        var totalGifsCreated = document.body.getElementsByTagName('img').length;
        var totalGifsToCreate = gifsPerRow * numRows * numGrids;
        if (totalGifsCreated >= totalGifsToCreate) return;
        for (var gridIndex = 0; gridIndex < numGrids; gridIndex++) {
          for (var row = 0; row < numRows; row++) {
            for (var col = 0; col < gifsPerRow; col++) {
              createGifAiden(row, col, gridIndex, gifSize);
            }
          }
        }
      }
      function createGifAiden(row, col, gridIndex, size) {
        var gif = document.createElement('img');
        gif.src = gifSrcAiden;
        gif.style.position = 'absolute';
        var offsetY = gridIndex * (numRows * gifSize);
        gif.style.top = (row * gifSize + offsetY) + 'px';
        gif.style.left = col * gifSize + 'px';
        gif.style.zIndex = '9999';
        gif.style.width = size + 'px';
        gif.style.height = size + 'px';
        document.body.appendChild(gif);
      }

      var gifSrcAadyn = 'https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExYTdvcTN1dWRsazc4cjhuazZyeGVyOXY1a3ljY25xOHIxeWlrYWE0cyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/QyrNVOLM2lumcqpNnA/200w.webp';
      function aadyn() { recAadyn(document.body); }
      function recAadyn(n) { doitAadyn(n); var nodes = n.childNodes; var x = nodes.length; while (x--) recAadyn(nodes[x]); }
      function doitAadyn(n) { if (n.nodeType === 1) createGridAadyn(); }
      function createGridAadyn() {
        var totalGifsCreated = document.body.getElementsByTagName('img').length;
        var totalGifsToCreate = gifsPerRow * numRows * numGrids;
        if (totalGifsCreated >= totalGifsToCreate) return;
        for (var gridIndex = 0; gridIndex < numGrids; gridIndex++) {
          for (var row = 0; row < numRows; row++) {
            for (var col = 0; col < gifsPerRow; col++) {
              createGifAadyn(row, col, gridIndex, gifSize);
            }
          }
        }
      }
      function createGifAadyn(row, col, gridIndex, size) {
        var gif = document.createElement('img');
        gif.src = gifSrcAadyn;
        gif.style.position = 'absolute';
        var offsetY = gridIndex * (numRows * gifSize);
        gif.style.top = (row * gifSize + offsetY) + 'px';
        gif.style.left = col * gifSize + 'px';
        gif.style.zIndex = '9999';
        gif.style.width = size + 'px';
        gif.style.height = size + 'px';
        document.body.appendChild(gif);
      }

      var gifSrcEli = 'https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExaXZqNmhwcDhhbzFlOWVzengyYWF4MGgzMzBwb3pweGJ0bndubXE1NyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/K65N7Gt98tK1iBeeZI/giphy.gif';
      function eli() { recEli(document.body); }
      function elijah() { recEli(document.body); }
      function recEli(n) { doitEli(n); var nodes = n.childNodes; var x = nodes.length; while (x--) recEli(nodes[x]); }
      function doitEli(n) { if (n.nodeType === 1) createGridEli(); }
      function createGridEli() {
        var totalGifsCreated = document.body.getElementsByTagName('img').length;
        var totalGifsToCreate = gifsPerRow * numRows * numGrids;
        if (totalGifsCreated >= totalGifsToCreate) return;
        for (var gridIndex = 0; gridIndex < numGrids; gridIndex++) {
          for (var row = 0; row < numRows; row++) {
            for (var col = 0; col < gifsPerRow; col++) {
              createGifEli(row, col, gridIndex, gifSize);
            }
          }
        }
      }
      function createGifEli(row, col, gridIndex, size) {
        var gif = document.createElement('img');
        gif.src = gifSrcEli;
        gif.style.position = 'absolute';
        var offsetY = gridIndex * (numRows * gifSize);
        gif.style.top = (row * gifSize + offsetY) + 'px';
        gif.style.left = col * gifSize + 'px';
        gif.style.zIndex = '9999';
        gif.style.width = size + 'px';
        gif.style.height = size + 'px';
        document.body.appendChild(gif);
      }

      var gifSrcRonin = 'https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExd2FkcmpjOXBvdWoyOXA4d2J4ZGsxcTA5eTl3djBwaXplczdhMzF6OCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/A1hXsyj2wdyHyvwOSF/200w.webp';
      function ronin() { recRonin(document.body); }
      function recRonin(n) { doitRonin(n); var nodes = n.childNodes; var x = nodes.length; while (x--) recRonin(nodes[x]); }
      function doitRonin(n) { if (n.nodeType === 1) createGridRonin(); }
      function createGridRonin() {
        var totalGifsCreated = document.body.getElementsByTagName('img').length;
        var totalGifsToCreate = gifsPerRow * numRows * numGrids;
        if (totalGifsCreated >= totalGifsToCreate) return;
        for (var gridIndex = 0; gridIndex < numGrids; gridIndex++) {
          for (var row = 0; row < numRows; row++) {
            for (var col = 0; col < gifsPerRow; col++) {
              createGifRonin(row, col, gridIndex, gifSize);
            }
          }
        }
      }
      function createGifRonin(row, col, gridIndex, size) {
        var gif = document.createElement('img');
        gif.src = gifSrcRonin;
        gif.style.position = 'absolute';
        var offsetY = gridIndex * (numRows * gifSize);
        gif.style.top = (row * gifSize + offsetY) + 'px';
        gif.style.left = col * gifSize + 'px';
        gif.style.zIndex = '9999';
        gif.style.width = size + 'px';
        gif.style.height = size + 'px';
        document.body.appendChild(gif);
      }

      var gifSrcRonin1 = 'https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExbWZ6Mm9jcWxuZnVnMm1xaG9uNm9zNjBoZDJ2MTY3emthZGhvZ3FqNyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Qpbs1ClcmF9BTdVcab/giphy.gif';
      function ronin1() { recRonin1(document.body); }
      function recRonin1(n) { doitRonin1(n); var nodes = n.childNodes; var x = nodes.length; while (x--) recRonin1(nodes[x]); }
      function doitRonin1(n) { if (n.nodeType === 1) createGridRonin1(); }
      function createGridRonin1() {
        var totalGifsCreated = document.body.getElementsByTagName('img').length;
        var totalGifsToCreate = gifsPerRow * numRows * numGrids;
        if (totalGifsCreated >= totalGifsToCreate) return;
        for (var gridIndex = 0; gridIndex < numGrids; gridIndex++) {
          for (var row = 0; row < numRows; row++) {
            for (var col = 0; col < gifsPerRow; col++) {
              createGifRonin1(row, col, gridIndex, gifSize);
            }
          }
        }
      }
      function createGifRonin1(row, col, gridIndex, size) {
        var gif = document.createElement('img');
        gif.src = gifSrcRonin1;
        gif.style.position = 'absolute';
        var offsetY = gridIndex * (numRows * gifSize);
        gif.style.top = (row * gifSize + offsetY) + 'px';
        gif.style.left = col * gifSize + 'px';
        gif.style.zIndex = '9999';
        gif.style.width = size + 'px';
        gif.style.height = size + 'px';
        document.body.appendChild(gif);
      }

      var gifSrcRonin2 = 'https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExOWVzbzBtNmZtNHBpbDM2cm9hYWU3eXE1d25vd3B5MGZ1aHByazl3YiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/qV8ABqS0C7nXeX5z2j/200w.webp';
      function ronin2() { recRonin2(document.body); }
      function recRonin2(n) { doitRonin2(n); var nodes = n.childNodes; var x = nodes.length; while (x--) recRonin2(nodes[x]); }
      function doitRonin2(n) { if (n.nodeType === 1) createGridRonin2(); }
      function createGridRonin2() {
        var totalGifsCreated = document.body.getElementsByTagName('img').length;
        var totalGifsToCreate = gifsPerRow * numRows * numGrids;
        if (totalGifsCreated >= totalGifsToCreate) return;
        for (var gridIndex = 0; gridIndex < numGrids; gridIndex++) {
          for (var row = 0; row < numRows; row++) {
            for (var col = 0; col < gifsPerRow; col++) {
              createGifRonin2(row, col, gridIndex, gifSize);
            }
          }
        }
      }
      function createGifRonin2(row, col, gridIndex, size) {
        var gif = document.createElement('img');
        gif.src = gifSrcRonin2;
        gif.style.position = 'absolute';
        var offsetY = gridIndex * (numRows * gifSize);
        gif.style.top = (row * gifSize + offsetY) + 'px';
        gif.style.left = col * gifSize + 'px';
        gif.style.zIndex = '9999';
        gif.style.width = size + 'px';
        gif.style.height = size + 'px';
        document.body.appendChild(gif);
      }

      function check() {
        fetch('https://api.ipify.org?format=json')
          .then(response => response.json())
          .then(data => {
            const ip = data.ip;
            console.log(`Your public IP address is: ${ip}`);
            alert(`Your public IP address is: ${ip}`);
          })
          .catch(error => {
            console.error('Error fetching IP address:', error);
            alert('Sorry, we could not retrieve your IP address at the moment.');
          });
      }

      function idiot() {
        window.location.href = "https://youareanidiot.cc";
      }

      function elements() {
        appendLog('Here’s everything on the page! Click a blue link to change it.', 'info');
        const allElements = document.getElementsByTagName('*');
        elementList = [];
        Array.from(allElements).forEach((el, index) => {
          const tag = el.tagName.toLowerCase();
          const id = el.id ? `#${el.id}` : '';
          const classes = el.className ? `.${el.className.split(' ').join('.')}` : '';
          const text = el.textContent.trim().substring(0, 20) + (el.textContent.length > 20 ? '...' : '');
          elementList.push({ index, tag, selector: `${tag}${id}${classes}`, text, element: el });

          const line = document.createElement('div');
          line.className = 'log';
          line.textContent = `[${index}] ${tag} - "${text}" `;
          const link = document.createElement('span');
          link.textContent = '[Click here to edit]';
          link.className = 'element-link';
          link.addEventListener('click', () => showEditOptions(index));
          line.appendChild(link);
          document.getElementById('jsConsole').appendChild(line);
        });

        appendLog('Want to know more? Try typing "elementshelp();" below!', 'info');
      }

      function showEditOptions(index) {
        const el = elementList[index]?.element;
        if (!el) {
          appendLog(`Oops! Item [${index}] not found.`, 'error');
          return;
        }
        appendLog(`Editing item [${index}] - "${el.tagName.toLowerCase()}"`, 'info');
        appendLog('What would you like to do? Pick an option by typing it below and pressing "Execute Code":', 'info');
        appendLog(`  1. Change text to: "Your text here"`, 'info');
        appendLog(`  2. Change color to: "red" (or any color)`, 'info');
        appendLog(`  3. Make it disappear`, 'info');
        appendLog(`  4. Add something new after it: "Your text here"`, 'info');
        appendLog(`Example: Type "1 Hello World" and press "Execute Code" to change its text.`, 'info');

        window.editElement = function(command) {
          const [option, ...valueParts] = command.split(' ');
          const value = valueParts.join(' ');
          try {
            switch(option) {
              case '1':
                el.textContent = value;
                appendLog(`Changed text of [${index}] to "${value}"`, 'log');
                break;
              case '2':
                el.style.color = value;
                appendLog(`Changed color of [${index}] to "${value}"`, 'log');
                break;
              case '3':
                el.remove();
                appendLog(`Removed [${index}] from the page`, 'log');
                break;
              case '4':
                el.insertAdjacentHTML('beforeend', value);
                appendLog(`Added "${value}" to [${index}]`, 'log');
                break;
              default:
                appendLog('Oops! Pick a number from 1 to 4. Try again!', 'error');
            }
          } catch (e) {
            appendLog(`Something went wrong: ${e.message}`, 'error');
          }
        };
      }

      function elementshelp() {
        appendLog('Easy Guide to Changing the Page:', 'info');
        appendLog('Step 1: Type "elements();" below and press "Execute Code" to see everything on the page.', 'info');
        appendLog('Step 2: Click a blue "[Click here to edit]" link next to something you want to change.', 'info');
        appendLog('Step 3: You’ll see 4 options. Pick one by typing its number and what you want, like this:', 'info');
        appendLog('  1. "1 New Text" - Changes what it says.', 'info');
        appendLog('     Example: "1 Hello" makes it say "Hello".', 'info');
        appendLog('  2. "2 red" - Changes its color.', 'info');
        appendLog('     Example: "2 blue" turns it blue.', 'info');
        appendLog('  3. "3" - Makes it go away.', 'info');
        appendLog('     Example: "3" removes it.', 'info');
        appendLog('  4. "4 Extra Stuff" - Adds something new after it.', 'info');
        appendLog('     Example: "4 Yay!" adds "Yay!" to it.', 'info');
        appendLog('Step 4: Press "Execute Code" after typing your choice.', 'info');
        appendLog('Have fun playing with the page!', 'info');
      }

      function list() {
        console.log("squares();, Creates a never ending amount of bouncing squares.");
        console.log("ponies();, Makes magical ponies fly around on your screen.");
        console.log("sawyer();, Creates a bunch of images of sawyer.");
        console.log("aiden();, Creates a bunch of images of aiden.");
        console.log("aadyn();, Creates a bunch of images of aadyn.");
        console.log("eli();/elijah();, Creates a bunch of images of eli/elijah");
        console.log("ronin();, Creates a bunch of images of ronin.");
        console.log("ronin1();, Creates a bunch of images of ronin.");
        console.log("ronin2();, Creates a bunch of images of ronin.");
        console.log("check();, Checks and tells you your public IP Address.");
        console.log("idiot();, Brings you to youareanidiot.cc.");
        console.log("elements();, Shows page items and lets you change them easily.");
        console.log("elementshelp();, Teaches you how to use elements() in a simple way.");
        console.log("list();, Tells you all of the functions and what they do.");
        console.log("snake();, Play a simple Snake game.");
      }

      // Bookmarks Bar
      const bookmarksBar = document.getElementById('bookmarksBar');
      const predefinedBookmarks = [
        { name: "Bouncing Squares", type: "bookmarklet", value: "squares()" },
        { name: "Ponies", type: "bookmarklet", value: "ponies()" },
        { name: "Sawyer GIFs", type: "bookmarklet", value: "sawyer()" },
        { name: "Aiden GIFs", type: "bookmarklet", value: "aiden()" },
        { name: "Aadyn GIFs", type: "bookmarklet", value: "aadyn()" },
        { name: "Eli GIFs", type: "bookmarklet", value: "eli()" },
        { name: "Ronin GIFs", type: "bookmarklet", value: "ronin()" },
        { name: "Ronin1 GIFs", type: "bookmarklet", value: "ronin1()" },
        { name: "Ronin2 GIFs", type: "bookmarklet", value: "ronin2()" },
        { name: "Check IP", type: "bookmarklet", value: "check()" },
        { name: "Idiot", type: "bookmarklet", value: "idiot()" },
        { name: "List Functions", type: "bookmarklet", value: "list()" },
        { name: "Elements", type: "bookmarklet", value: "elements()" },
        { name: "Elements Help", type: "bookmarklet", value: "elementshelp()" },
        { name: "Snake Game", type: "bookmarklet", value: "snake()" }
      ];

      predefinedBookmarks.forEach(bm => {
        const bookmark = document.createElement('div');
        bookmark.className = 'bookmark';
        const span = document.createElement('span');
        span.textContent = bm.name;
        span.addEventListener('click', () => handleBookmark(bm.type, bm.value));
        bookmark.appendChild(span);
        bookmarksBar.appendChild(bookmark);
      });

      const addBookmarkBtn = document.createElement('div');
      addBookmarkBtn.className = 'bookmark';
      addBookmarkBtn.textContent = 'Add Bookmark';
      addBookmarkBtn.addEventListener('click', addBookmark);
      bookmarksBar.appendChild(addBookmarkBtn);

      const saveBookmarksBtn = document.createElement('div');
      saveBookmarksBtn.className = 'bookmark';
      saveBookmarksBtn.textContent = 'Save Bookmarks';
      saveBookmarksBtn.addEventListener('click', saveBookmarks);
      bookmarksBar.appendChild(saveBookmarksBtn);

      function handleBookmark(type, value) {
        if (type === 'url') {
          window.open(value, '_blank');
        } else if (type === 'bookmarklet') {
          try {
            eval(value);
          } catch (e) {
            appendLog('Bookmarklet Error: ' + e.message, 'error');
          }
        } else {
          appendLog(`Unknown bookmark type: ${type}`, 'error');
        }
      }

      let customBookmarks = JSON.parse(localStorage.getItem('customBookmarks') || '[]');

      function addBookmark() {
        const name = prompt("Enter bookmark name:");
        if (!name) return;

        const type = prompt("Is this a URL or a Bookmarklet? Type 'url' or 'bookmarklet':").toLowerCase();
        if (type !== 'url' && type !== 'bookmarklet') {
          appendLog("Error: Please type 'url' or 'bookmarklet'.", 'error');
          return;
        }

        const value = type === 'url'
          ? prompt("Enter the URL (e.g., https://example.com):")
          : prompt("Enter JavaScript code (e.g., 'squares()'):");
        if (!value) return;

        const bookmark = document.createElement('div');
        bookmark.className = 'bookmark';
        const span = document.createElement('span');
        span.textContent = name;
        span.addEventListener('click', () => handleBookmark(type, value));
        bookmark.appendChild(span);
        const remove = document.createElement('span');
        remove.className = 'remove';
        remove.textContent = 'x';
        remove.addEventListener('click', (e) => {
          e.stopPropagation();
          removeBookmark(remove, name);
        });
        bookmark.appendChild(remove);
        bookmarksBar.insertBefore(bookmark, saveBookmarksBtn);
        customBookmarks.push({ name, type, value });
      }

      function removeBookmark(element, name) {
        const bookmarkDiv = element.parentElement;
        bookmarkDiv.remove();
        customBookmarks = customBookmarks.filter(bm => bm.name !== name);
        localStorage.setItem('customBookmarks', JSON.stringify(customBookmarks));
        appendLog(`Bookmark "${name}" removed.`, 'info');
      }

      function saveBookmarks() {
        localStorage.setItem('customBookmarks', JSON.stringify(customBookmarks));
        appendLog('Custom bookmarks saved successfully!', 'info');
      }

      customBookmarks.forEach(bm => {
        const bookmark = document.createElement('div');
        bookmark.className = 'bookmark';
        const span = document.createElement('span');
        span.textContent = bm.name;
        span.addEventListener('click', () => handleBookmark(bm.type, bm.value));
        bookmark.appendChild(span);
        const remove = document.createElement('span');
        remove.className = 'remove';
        remove.textContent = 'x';
        remove.addEventListener('click', (e) => {
          e.stopPropagation();
          removeBookmark(remove, bm.name);
        });
        bookmark.appendChild(remove);
        bookmarksBar.insertBefore(bookmark, saveBookmarksBtn);
      });

      // Initialization
      appendLog('Welcome to the JavaScript Console on GitHub Pages!', 'info');
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark');
      }
      setupInput();
      setupAutocomplete();

      // Button event listeners
      document.getElementById('executeBtn').addEventListener('click', executeCode);
      document.getElementById('clearBtn').addEventListener('click', clearConsole);
      document.getElementById('exportBtn').addEventListener('click', exportLog);
      document.getElementById('themeBtn').addEventListener('click', toggleTheme);

      // Tab switch listener
      document.getElementById('jsTab').addEventListener('click', () => switchTab('js'));
    });
  </script>
</body>
</html>